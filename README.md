# *Django rest API*

---
>Приветствую, меня зовут Андрей Лукичев. 
Это мой первый проект и если честно,
первый опыт в роли программиста.
Теперь к делу:

### Установка всех необходимых пакетов, с которыми все будет работать как надо:

```
pip install -r requirements.txt
```
### Что тут есть и что умеем?
>В проекте, две сущности: Materials и Sellers.
Соответственно материалы и их продавцы, все это 
запаковано в app от Django, под названием MarketApp. 
Так же в проекте реализована авторизация через JWT


Что бы все это загрузить в нашу базу данных для начала
обратимся к основной папке проекта django. Находим settings,
в ней есть строка:
```
DATABASES = { 
```
Вставляем данные своей локальной или какой угодно
базы данных и выполняем миграции командой:

```
python manage.py migrate
```
После миграций пришло время приступить к запуску этой ракеты, 
пристегните ремни, мы взлетаем по команде:
```
python manage.py runserver
```
## Сервер запущен
А это значит, что все модули работают и пакеты установлены корректно. Тест прошел на ура,
Приостанавливаем по команде Ctrl+c в терминале и перейдем к созданию токенов для дальнейшей авторизации и 
использования методов для работы с базой данных.
---
### JWT авторизация:
#### 1) Для начала нам нужно сделать superuser'a делаем это в терминале 
```
python manage.py createsuperuser
```
Нам на этом этапе предлагают ввести свои данные, но можно ограничиться 
простым примером User:root;Password:toor:Email-вписывать не обязательно,
достаточно просто нажать на кнопку insert. Готово, user создан, снова запускаем проект командой:
```
python manage.py runserver
```

#### 2)Авторизация через postman запросы:
Делаем запрос через post в body(Raw или JSON, как глазу любо, тут не принципиально):
> http://127.0.0.1:8000/api/token/

Копируем созданный токен (Так же видим refresh токен, но он нам пока не нужен,
он на случай, если время предыдущего истекло), далее переходим в новую вкладку и вставляем url:
>http://127.0.0.1:8000/material

Делаем запрос через get, прописываем в Headers > Authorization и вводим в строку 
Value команду:
```
PostgreSQL_JWTAuth 'ваш токен, без кавычек этих, просто через пробел')
```
## Вуаля, база на месте, доступ имеем, теперь что с ним делать?

У обоих сущностей прописаны свои методы, а именно:
>seller
>>'GET' (Вывод, так же по id, если вписать через '/' номер id), 'POST' (Добавление), 'PUT' (Обновление), 'DELETE' (Удаление).

> material
> >Аналогично seller

---

### Метод Get реализован интересным способом, пример:

Если сделать запрос: 
```
http://127.0.0.1:8000/material
```
То в результате мы получим список всех материалов,а если добавить
номер id по примеру:

```
http://127.0.0.1:8000/material/1
```
Мы получим информацию только по материалу с id "1"
>Таким способом, реализован поиск по id, как у материалов
так и у продавца.

---

### Метод POST (По этому примеру можно так же использовать метод PUT для замены значений )
```commandline
   {
        "MaterialId": 1,
        "MaterialName": "Wood",
        "Cost": "100rub"
    },
```
Так мы создали сущность с id, названием и стоимостью.

---

### Метод DELETE (тестировать осторожно, удаляет моментально)
Для его реализации достаточно просто ввести ссылку с id и использовать метод delete в Postman.
```
http://127.0.0.1:8000/material/1
```
---
По аналогии можно работать и с сущностью "seller"
---
На этом всё.
